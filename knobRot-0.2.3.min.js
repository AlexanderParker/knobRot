(function(e){var t={init:function(n){var r=e.extend({classes:["rot-knob"],frameCount:64,frameWidth:64,frameHeight:64,minimumValue:-100,maximumValue:100,detent:false,detentValue:0,detentThreshold:10,discreteSteps:false,stepCount:2,dragVertical:true,invertDirection:false,dragMultiplier:1,hideInput:false,hideRealValue:true,isToggle:true,callback:function(){}},n);e("body").data("knobRot",{dragging:false});t.addCssStyles();return this.each(function(){if(r.minimumValue>=r.maximumValue){}else if(r.discreteSteps==true&&r.stepCount<=1){throw"Knob range error: Maximum value must be greater than minimum value.";throw"Invalid step count: Discrete knob must have a minimum of 2 steps."}var n=e(this);n.callback=r.callback;n.attr("autocomplete","off");if(n.is("input:text")){var i=e("<input>",{type:"text",value:parseFloat(n.val()),autocomplete:"off"});i.data("knobRot",{settings:r,outputField:n});n.after(i);i.data("knobRot").rangeSize=r.maximumValue-r.minimumValue;i.data("knobRot").rangeOffset=0-r.minimumValue;if(r.discreteSteps==true){i.data("knobRot").stepIncrement=(r.maximumValue-r.minimumValue)/(r.stepCount-1)}i.data("knobRot").calculatedValue=t.calculateValue(i);i.data("knobRot").currentFrame=t.calculateFrame(i);i.data("knobRot").dirtyData=true;var s=r.classes.slice();s[s.length]="rot-knob-base";var o=n.attr("name");if(typeof o=="undefined"){o="unnamed"}var u=n.attr("id");if(typeof u=="undefined"){u="noid"}s[s.length]="for-input-"+o+"-"+u;var a=e("<div>",{"class":s.join(" ")});a.data("knobRot",{realValue:i,outputField:n});i.data("knobRot").knobDiv=a;n.data("knobRot",{knob:a,realValue:i});a.css({width:r.frameWidth+"px",height:r.frameHeight+"px","background-position":t.calculateBackgroundOffsetX(i)+"px 0px",cursor:t.getDragCursorClass(i)});a.on("mousedown.knobRot",function(n){if(n.which!=1){return}$knobDiv=e(this);if(e("body").data("knobRot").dragging!=true){var r={left:n.screenX,top:n.screenY};$knobDiv.addClass("dragging");e("body").data("knobRot").dragging=true;e("body").data("knobRot").lastOffset=r;e("body").data("knobRot").knobDiv=$knobDiv;e("body").addClass(t.getDragCursorClass($knobDiv.data("knobRot").realValue));$knobDiv.data("knobRot").outputField.trigger("knobdragstart",$knobDiv)}});e(document).on("mousemove.knobRot",function(n){if(e("body").data("knobRot").dragging==true){var r={horizontal:n.screenX-e("body").data("knobRot").lastOffset.left,vertical:n.screenY-e("body").data("knobRot").lastOffset.top};e("body").data("knobRot").lastOffset={left:n.screenX,top:n.screenY};t.updateValue(e("body").data("knobRot").knobDiv.data("knobRot").realValue,r);e("body").data("knobRot").knobDiv.data("knobRot").outputField.trigger("knobrefresh",e("body").data("knobRot").knobDiv);e("body").data("knobRot").knobDiv.data("knobRot").outputField.trigger("knobdrag",e("body").data("knobRot").knobDiv);t.updateCallback(e("body").data("knobRot").knobDiv.data("knobRot").realValue)}});e(document).on("mouseup.knobRot",function(){t.stopDrag()});e("body").on("selectstart.knobRot select.knobRot mousedown.knobRot mouseover.knobRot",function(){if(e("body").data("knobRot").dragging==true){return false}});n.on("knobrefresh.knobRot",function(){n.callback();i.data("knobRot").dirtyData=true});a.on("mouseover.knobRot mouseout.knobRot mouseup.knobRot",function(){a.data("knobRot").outputField.trigger("knobrefresh",a)});a.on("mouseover",function(){n.addClass("hover");var e=t.getDragCursorClass(a.data("knobRot").realValue);a.addClass(e);a.data("knobRot").outputField.trigger("knobmouseover",a)});a.on("mouseout",function(){n.removeClass("hover");var e=t.getDragCursorClass(a.data("knobRot").realValue);a.removeClass(e);a.data("knobRot").outputField.trigger("knobmouseout",a)});i.after(a);a.find("*").on("change",function(){t.updateCallback(i)});if(r.hideInput==true){n.hide()}if(r.hideRealValue==true){i.hide()}n.attr("disabled","disabled");n.attr("unselectable","on");n.on("mousedown",function(){return false});n.on("mouseover",function(){return false});n.trigger("knobrefresh",a);n.trigger("knobready",a)}})},getvalue:function(){$this=e(this);if($this.is("input:text")){if($this.data("knobRot")){return $this.data("knobRot").calculatedValue}else{throw'Can not call "value" on a non-knobRot element'}}else{throw"Not a valid input element for knobRot.getvalue"}},set:function(t){return e(this).each(function(){var n=e(this);if(n.is("input:text")){n.data("knobRot").realValue.val(parseFloat(t));n.data("knobRot").realValue.trigger("knobrefresh")}})},calculateStep:function(e){var t=e.data("knobRot");var n=t.settings;if(n.discreteSteps){var r=parseFloat(e.val())+t.rangeOffset;var i=r/t.rangeSize;var s=Math.round(i*(n.stepCount-1));return s}else{throw"Unable to calculate discrete step offset for non-discrete knob."}},calculateValue:function(e){var n=e.data("knobRot");var r=n.settings;if(r.discreteSteps==true){var i=t.calculateStep(e);var s=i*n.stepIncrement-n.rangeOffset}else{var s=parseFloat(e.val())}if(r.detent==true&&s>=r.detentValue-r.detentThreshold&&s<=r.detentValue+r.detentThreshold){if(e.data("knobRot").calculatedValue!=s&&(e.data("knobRot").calculatedValue<r.detentValue-r.detentThreshold||e.data("knobRot").calculatedValue>r.detentValue+r.detentThreshold)){e.data("knobRot").outputField.trigger("knobenterdetent",e.data("knobRot").knobDiv)}s=r.detentValue}else if(e.data("knobRot").calculatedValue==r.detentValue&&e.data("knobRot").calculatedValue!=s&&s!=r.detentValue){e.data("knobRot").outputField.trigger("knobleavedetent",e.data("knobRot").knobDiv)}if(s<r.minimumValue){e.val(r.minimumValue);e.data("knobRot").outputField.trigger("knobvaluemin",e.data("knobRot").knobDiv);return r.minimumValue}else if(s>r.maximumValue){e.val(r.maximumValue);e.data("knobRot").outputField.trigger("knobvaluemax",e.data("knobRot").knobDiv);return r.maximumValue}return s},calculateFrame:function(e){var n=e.data("knobRot");var r=n.settings;var i=t.calculateValue(e)+n.rangeOffset;var s=i/n.rangeSize;var o=Math.round(s*(r.frameCount-1));if(o>r.frameCount-1){return r.frameCount-1}else if(o<0){return 0}if(e.data("knobRot").currentFrame!=o){e.data("knobRot").outputField.trigger("knobframechange",[n,e.data("knobRot").currentFrame,o])}return o},calculateBackgroundOffsetX:function(e){var n=e.data("knobRot");var r=n.settings;return 0-t.calculateFrame(e)*r.frameWidth},updateCallback:function(e){if(e.data("knobRot").dirtyData==true){e.data("knobRot").dirtyData=false;e.data("knobRot").knobDiv.css("background-position",t.calculateBackrgroundOffset(e));e.data("knobRot").calculatedValue=t.calculateValue(e);e.data("knobRot").outputField.val(e.data("knobRot").calculatedValue);e.data("knobRot").outputField.data("knobRot").calculatedValue=e.data("knobRot").calculatedValue}},stopDrag:function(){if(e("body").data("knobRot").dragging==true){var n=e("body").data("knobRot").knobDiv;e("body").data("knobRot").dragging=false;n.removeClass("dragging");e("body").removeClass(t.getDragCursorClass(n.data("knobRot").realValue));n.data("knobRot").outputField.trigger("knobrefresh")}},updateValue:function(e,t){var n=0;if(e.data("knobRot").settings.dragVertical){n=t.vertical}else{n=t.horizontal}n=n*e.data("knobRot").settings.dragMultiplier;if(!e.data("knobRot").settings.invertDirection&&e.data("knobRot").settings.dragVertical==true||e.data("knobRot").settings.invertDirection&&e.data("knobRot").settings.dragVertical==false){n=0-n}var r=parseFloat(e.val());var i=r+n;if(i>e.data("knobRot").settings.maximumValue){i=e.data("knobRot").settings.maximumValue}else if(i<e.data("knobRot").settings.minimumValue){i=e.data("knobRot").settings.minimumValue}e.val(i)},calculateBackrgroundOffset:function(n){var r=t.calculateBackgroundOffsetX(n)+"px";var i="0px";if(n.data("knobRot").outputField.hasClass("hover")&&e("body").data("knobRot").dragging==false){i=0-n.data("knobRot").settings.frameHeight+"px"}if(e("body").data("knobRot").dragging==true&&n.is(e("body").data("knobRot").knobDiv.data("knobRot").realValue)){i=0-n.data("knobRot").settings.frameHeight*2+"px"}return r+" "+i},getDragCursorClass:function(e){if(e.data("knobRot").settings.dragVertical==true){return"rotknob-n-resize"}else{return"rotknob-e-resize"}},addCssStyles:function(){var t=e('<style type="text/css" rel="stylesheet">'+"	.rotknob-n-resize{ cursor: n-resize!important; }"+"	.rotknob-e-resize{ cursor: e-resize!important; }"+"</style>").appendTo("body")},stopCallback:function(){if(typeof console!=="undefined"&&typeof (console.log!=="undefined")){console.log("stopCallback has been deprecated in favour of event listeners.  You should not have to worry about it anymore.")}}};e.fn.knobRot=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.knobRot")}}})(jQuery)